<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="./dist/output.css" rel="stylesheet" />

    <title>‡¥∂‡µÅ‡¥¶‡µç‡¥ß ‡¥π‡¥æ‡¥∏‡µç‡¥Ø‡¥Ç | Pure Comedy</title>
  </head>
  <body>
    <nav
      class="flex items-center justify-center bg-gray-50 drop-shadow-lg bg-yellow-300 md:h-16"
    >
      <div
        class="w-11/12 flex flex-col justify-between md:w-10/12 md:flex-row md:items-center"
      >
        <div class="h-16 flex items-center">
          <img src="./assets/logo-light.png" class="h-8 w-auto" />
        </div>
        <div
          class="flex justify-center text-xl flex-col md:flex-row md:items-center md:text-base"
        >
          <div
            class="transition ease-in-out hover:-translate-y-0.5 h-10 flex items-center mx-10"
          >
            random joke üîÄ
          </div>
          <div
            class="transition ease-in-out hover:-translate-y-0.5 h-10 flex items-center cursor-pointer mx-10 md:ml-0"
          >
            <a href="./src/submit.html">submit a joke üìù</a>
          </div>
        </div>
      </div>
    </nav>
    <main class="flex items-center flex-col w-screen py-8 text-xl min-h-1000">
      <div
        class="w-11/12 flex flex-col items-end my-16 md:w-10/12 md:flex-row md:items-start"
      >
        <div
          class="border-2 rounded-3xl py-10 px-8 text-lg shadow-lg shadow-black w-full md:w-1000 md:py-28 md:px-20 md:text-4xl"
          id="joke-container"
        >
          Loading Joke...
        </div>
        <div class="flex flex-row text-white md:flex-col">
          <button
            class="rounded-full h-12 w-12 bg-blue-500 m-2 shadow-lg"
            id="new-joke-btn"
          >
            ‚Ü©Ô∏é
          </button>
          <button class="rounded-full h-12 w-12 bg-red-500 m-2 shadow-lg">
            ‚úÜ
          </button>
        </div>
      </div>
    </main>
    <footer
      class="bottom-0 flex justify-center w-screen bg-yellow-300 py-8 h-52"
    >
      <div class="w-11/12 flex justify-between md:w-10/12">
        <div class="w-1/2">
          <img src="./assets/logo-light.png" class="w-full md:w-4/12" />
        </div>
        <div class="text-m">
          <div>About</div>
          <div>API</div>
          <div>Contact</div>
          <div>Docs</div>
          <div>Submit a joke</div>
        </div>
      </div>
    </footer>
    <script>
      async function fetchJoke() {
        try {
          // Make a request to your API endpoint
          const response = await fetch(
            "https://hasyam-api.cyclic.app/api/joke"
          );
          const data = await response.json();

          // Access the joke from the response data
          const joke = data.joke;

          // Replace newline characters with two HTML line breaks
          const formattedJoke = joke.replaceAll("\n", "<br>");

          // Display the joke on the webpage
          const jokeContainer = document.getElementById("joke-container");
          jokeContainer.innerHTML = formattedJoke;
        } catch (error) {
          console.error("Error:", error);
        }
      }

      function fetchJokeOnLoadAndRefresh() {
        fetchJoke();
      }

      const newJokeBtn = document.getElementById("new-joke-btn");
      newJokeBtn.addEventListener("click", fetchJoke);
      window.addEventListener("load", fetchJokeOnLoadAndRefresh);
    </script>
  </body>
</html>
